<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Make Shell/Git Better · Minibase</title><meta name="description" content="Make Shell/Git Better - Colafornia"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://blog.colafornia.me/atom.xml" title="Minibase"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/colafornia" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Make Shell/Git Better</h1><div class="post-info">Sep 15, 2017</div><div class="post-content"><h2 id="1-起手式-oh-my-zsh"><a href="#1-起手式-oh-my-zsh" class="headerlink" title="1.起手式 oh-my-zsh"></a>1.起手式 oh-my-zsh</h2><p><img src="https://camo.githubusercontent.com/5c385f15f3eaedb72cfcfbbaf75355b700ac0757/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6f686d797a73682f6f682d6d792d7a73682d6c6f676f2e706e67" alt="oh-my-zsh"></p>
<p>zsh 被称作是最强大的 shell，而 oh-my-zsh 则是最流行的 zsh 配置文件，提供了丰富的主题以及大量插件，极大地扩展了 zsh 的功能。<br>可以无脑引入，便得到了最基本又好用的文件夹跳转，路径、命令、参数补全等便利操作。<br>推荐 plugin: git, <a href="https://github.com/wting/autojump/wiki" target="_blank" rel="external">autojump</a>, <a href="https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/osx" target="_blank" rel="external">osx</a></p>
<h2 id="2-优化你的-Git"><a href="#2-优化你的-Git" class="headerlink" title="2.优化你的 Git"></a>2.优化你的 Git</h2><p><strong>① 美化 diff</strong><br>Git 自己的 git diff 还是蛮不好用也不好看的，文件名和 diff 内容不太好定位。<br>基于 <a href="https://github.com/so-fancy/diff-so-fancy" target="_blank" rel="external">diff-so-fancy</a> 我们可以做一些美化工作。</p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install diff-so-fancy -g</div></pre></td></tr></table></figure>
<p>然后在 <code>~/.gitconfig</code> 文件中编辑<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[alias]</div><div class="line">  d = &quot;!f() &#123; [ -z \&quot;$GIT_PREFIX\&quot; ] || cd \&quot;$GIT_PREFIX\&quot; &amp;&amp; git diff --color \&quot;$@\&quot; | diff-so-fancy  | less --tabs=4 -    RFX; &#125;; f&quot;</div></pre></td></tr></table></figure></p>
<p>可以参考 <code>diff-so-fancy</code> 中的推荐颜色做配置，然后通过 <code>git d</code> 命令就可以看到优化过的 diff 信息了<br>（git diff VS git d）<br><img src="https://cloud.githubusercontent.com/assets/39191/13622719/7cc7c54c-e555-11e5-86c4-7045d91af041.png" alt="diff"></p>
<p><strong>② 美化 log</strong><br>git log 打出来的日志结构是完全扁平的，信息也不够全，依然是很难一眼找到自己想要的信息<br>依然是在 <code>~/.gitconfig</code> 中编辑：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[alias]</div><div class="line">lg = log --graph --abbrev-commit --decorate --format=format:&apos;%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset)     %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)&apos; --all</div></pre></td></tr></table></figure></p>
<p>这样信息清晰好看了很多，也可以看到每个提交所在的分支及其分化衍合的情况<br>(git log VS git lg)</p>
<p><img src="http://o7ts2uaks.bkt.clouddn.com/6E897688-D526-4DC5-A373-05FB41734A91.png" alt="log"><br><img src="http://o7ts2uaks.bkt.clouddn.com/84B43431-AB74-446F-8442-3DFCD8E8E8BE.png" alt="lg"></p>
<p><strong>③ 命令加强 <a href="https://github.com/tj/git-extras" target="_blank" rel="external">git-extras</a></strong><br>TJ出品的 git 命令扩展集，应有尽有，要啥有啥，按需取用</p>
<h2 id="3-终端复用神器-Tmux"><a href="#3-终端复用神器-Tmux" class="headerlink" title="3.终端复用神器 Tmux"></a>3.终端复用神器 Tmux</h2><p>Tmux 是 Linux 中一种管理窗口的程序，用 Tmux 的主要原因是它提供了一个窗体组随时存储和恢复的功能。<br>现在我们经常在开发时给一个项目起很多 server，webpack server 占一个 tab，mock server 占一个 tab，开的时候开半天，哪个断了还要挨个找。<br>或者，在用 SSH 登录远程服务器进行调试时，开了N多窗口，过了一会儿发现 <code>Broken Pipe</code> 管子裂了，又得重来。<br>Tmux 可以帮助我们 split 窗口以及进行终端复用保证工作现场不丢失。<br><a href="http://cenalulu.github.io/linux/tmux/" target="_blank" rel="external">使用与安装方法</a></p>
<h2 id="4-给命令行使用的代理工具-proxychains-ng"><a href="#4-给命令行使用的代理工具-proxychains-ng" class="headerlink" title="4.给命令行使用的代理工具 proxychains-ng"></a>4.给命令行使用的代理工具 <a href="https://github.com/rofl0r/proxychains-ng" target="_blank" rel="external">proxychains-ng</a></h2><p>用公司的 mnpm 镜像其实就基本不需要这个了。<br>自己搭服务器或者在家里办公有需求的话可以用。</p>
<h2 id="5-commit-message-规范工具-commitizen"><a href="#5-commit-message-规范工具-commitizen" class="headerlink" title="5. commit message 规范工具 commitizen"></a>5. commit message 规范工具 <a href="https://github.com/commitizen/cz-cli" target="_blank" rel="external">commitizen</a></h2><p>制定 Code Review 规范时看到了 <a href="https://eggjs.org/zh-cn/contributing.html" target="_blank" rel="external">Egg.js 的代码贡献规范</a><br>其中总结了一条好的，有意义的 commit message 应该包含：</p>
<blockquote>
<p>① type: 本次 commit 的类型(feat/fix/stype/perf….)<br>② scope: 改动范围<br>③ subject: 简要概述本次提交做了什么<br>④ body: 补充 subject, 可以不写<br>⑤ footer: 本次提交关联的 issue, task</p>
</blockquote>
<p>手动按这个写还挺累挺难的，因此决定在团队中推行使用 commitizen<br>简单好用，立竿见影<br><img src="https://github.com/commitizen/cz-cli/raw/master/meta/screenshots/add-commit.png" alt="commitizen"></p>
<h2 id="6-好玩的-thefuck"><a href="#6-好玩的-thefuck" class="headerlink" title="6.好玩的 thefuck"></a>6.好玩的 <a href="https://github.com/nvbn/thefuck" target="_blank" rel="external">thefuck</a></h2><p><img src="https://raw.githubusercontent.com/nvbn/thefuck/master/example.gif" alt="thefuck"></p>
<p>一个好玩的小工具，给开发添点乐趣。</p>
</div></article></div></main><footer><div class="paginator"><a href="/post/2017/reading-pragmatic-programmer/" class="prev">PREV</a><a href="/post/2017/fix-chinese-input-listener/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2020 <a href="https://blog.colafornia.me">Colafornia</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-84469017-1",'auto');ga('send','pageview');</script></body></html>