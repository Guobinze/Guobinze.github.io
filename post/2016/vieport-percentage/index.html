<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Viewport-Percentage (or Viewport-Relative) Lengths · Minibase</title><meta name="description" content="Viewport-Percentage (or Viewport-Relative) Lengths - Colafornia"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://blog.colafornia.me/atom.xml" title="Minibase"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/colafornia" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Viewport-Percentage (or Viewport-Relative) Lengths</h1><div class="post-info">Mar 17, 2016</div><div class="post-content"><h3 id="什么是视区百分比长度（viewport-percentage-lengths）？"><a href="#什么是视区百分比长度（viewport-percentage-lengths）？" class="headerlink" title="什么是视区百分比长度（viewport-percentage lengths）？"></a>什么是视区百分比长度（viewport-percentage lengths）？</h3><p>先看一下W3C给出的定义：</p>
<blockquote>
<p>The viewport-percentage lengths are relative to the size of the initial containing block. When the height or width of the initial containing block is changed, they are scaled accordingly.</p>
</blockquote>
<p>意为视区百分比长度是与其包含块的尺寸有关，并且是随之变化的。<code>initial containing block</code>意为浏览器内部的可视区域，即<code>window.innerWidth/window.innerHeight</code>大小，不包含任务栏标题栏以及底部工具栏的浏览器区域大小。</p>
<a id="more"></a>
<p>视区单位有<code>vh</code> (相对于视区高度), <code>vw</code>(相对于视区宽度), <code>vmin</code> (相对于视区高度或宽度，取决于哪个更小) and <code>vmax</code> (类似于vw但取决于哪个更大)。</p>
<h3 id="它是如何分配浏览器高度的？"><a href="#它是如何分配浏览器高度的？" class="headerlink" title="它是如何分配浏览器高度的？"></a>它是如何分配浏览器高度的？</h3><p>我们可以假借<code>vh</code>: <code>1vh</code>相当于1%的视区高度，忽略元素在DOM树中的位置，100vh相当于浏览器内部可视区域的高度。</p>
<h3 id="浏览器兼容性？"><a href="#浏览器兼容性？" class="headerlink" title="浏览器兼容性？"></a>浏览器兼容性？</h3><p><img src="http://o7ts2uaks.bkt.clouddn.com/98A8FA40-23DE-4D3B-AE9B-A434F44A5AA0.png" alt="caniuse"></p>
<p>在css属性可用性查询网站<a href="http://caniuse.com/#search=viewport%20units" target="_blank" rel="external">caniuse</a>中我们查到了，目前主流浏览器对于视区单位的支持性，从中我们可以看出，<strong>Chrome 20+, IE9+ ,FireFox19+以及Safari6</strong> 都是支持的。</p>
<h3 id="100vh与100-的区别？"><a href="#100vh与100-的区别？" class="headerlink" title="100vh与100%的区别？"></a>100vh与100%的区别？</h3><p>我们知道，vh是相对于视区高度的单位，所以100vh被设置的高度永远是相对于<code>window.innerWidth/window.innerHeight</code>的。而被设置成百分比高度的标签，它的实际高度要取决于其父标签（块级）<br>就像这个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;body style=&quot;height:100%&quot;&gt;</div><div class="line">    &lt;div style=&quot;height:200px&quot;&gt;</div><div class="line">        &lt;p style=&quot;height:100%; display:block;&quot;&gt;Hello, world!&lt;/p&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<p>虽然p标签设置了高度为100％，但是其外部div的高度为200px，因此这个p标签的实际高度只是200px</p>
<h3 id="如何用百分比实现同vh一样的效果？"><a href="#如何用百分比实现同vh一样的效果？" class="headerlink" title="如何用百分比实现同vh一样的效果？"></a>如何用百分比实现同vh一样的效果？</h3><p>某些情况下，<code>vw</code>, <code>vh</code>所产生的效果与百分比<code>%单位</code>无异，尤其对于<code>absolute/fixed</code>定位属性的元素。比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    position: fixed;</div><div class="line">    top: 100%;</div><div class="line">    top: 100vh;</div><div class="line">    left: 5%;</div><div class="line">    left: 5vw;</div><div class="line">    right: 5%;</div><div class="line">    right: 5vw;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>支持vh, vw单位的浏览器就会使用视区单位（因为在后面声明）；不支持的就是要百分比%单位。</p>
<h3 id="参考内容"><a href="#参考内容" class="headerlink" title="参考内容"></a>参考内容</h3><ul>
<li><a href="http://stackoverflow.com/questions/1575141/make-div-100-height-of-browser-window" target="_blank" rel="external">James Donnelly__stackoverflow</a>:视区单位布道</li>
<li><a href="http://www.zhangxinxu.com/wordpress/2012/09/new-viewport-relative-units-vw-vh-vm-vmin/" target="_blank" rel="external">视区相关单位_张鑫旭博客</a>:更多相关与视区单位应用场景的尝试</li>
<li><a href="http://www.cnblogs.com/xiaopin/archive/2012/03/26/2418152.html" target="_blank" rel="external">JS,Jquery获取各种屏幕的宽度和高度</a>:复习一下有关屏幕高度的知识</li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/post/2016/angular-data-binding/" class="prev">PREV</a><a href="/post/2016/trans-javascript-code-tips/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2020 <a href="https://blog.colafornia.me">Colafornia</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-84469017-1",'auto');ga('send','pageview');</script></body></html>